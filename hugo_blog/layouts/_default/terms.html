{{ define "main" }}
{{ $categoriesPage := .Site.GetPage "taxonomyTerm" "categories" }}
{{ $tagsPage := .Site.GetPage "taxonomyTerm" "tags" }}

{{ $categoriesTerms := slice }}
{{ with $categoriesPage }}{{ $categoriesTerms = .Data.Terms.Alphabetical }}{{ end }}

{{ $tagsTerms := slice }}
{{ with $tagsPage }}{{ $tagsTerms = .Data.Terms.Alphabetical }}{{ end }}

{{ $first := "categories" }}
{{ if eq .Data.Plural "tags" }}{{ $first = "tags" }}{{ end }}

<section class="list-page taxonomy-page taxonomy-terms">
    <header class="page-header">
        <h1>分类与标签</h1>
        <p class="page-subtitle">按分类与标签聚合浏览文章</p>
    </header>

    <div class="taxonomy-grid">
        {{ if eq $first "categories" }}
        <section class="taxonomy-block">
            <h2 class="taxonomy-title">分类</h2>
            {{ if gt (len $categoriesTerms) 0 }}
            <div class="taxonomy-list">
                {{ range $categoriesTerms }}
                <a class="tag" href="{{ .Page.RelPermalink }}">
                    {{ .Page.Title }}
                    <span class="tag-count">{{ .Count }}</span>
                </a>
                {{ end }}
            </div>
            {{ else }}
            <p class="empty-tip">暂时还没有分类。</p>
            {{ end }}
        </section>

        <section class="taxonomy-block">
            <h2 class="taxonomy-title">标签</h2>
            {{ if gt (len $tagsTerms) 0 }}
            <div class="taxonomy-list">
                {{ range $tagsTerms }}
                <a class="tag" href="{{ .Page.RelPermalink }}">
                    {{ .Page.Title }}
                    <span class="tag-count">{{ .Count }}</span>
                </a>
                {{ end }}
            </div>
            {{ else }}
            <p class="empty-tip">暂时还没有标签。</p>
            {{ end }}
        </section>
        {{ else }}
        <section class="taxonomy-block">
            <h2 class="taxonomy-title">标签</h2>
            {{ if gt (len $tagsTerms) 0 }}
            <div class="taxonomy-list">
                {{ range $tagsTerms }}
                <a class="tag" href="{{ .Page.RelPermalink }}">
                    {{ .Page.Title }}
                    <span class="tag-count">{{ .Count }}</span>
                </a>
                {{ end }}
            </div>
            {{ else }}
            <p class="empty-tip">暂时还没有标签。</p>
            {{ end }}
        </section>

        <section class="taxonomy-block">
            <h2 class="taxonomy-title">分类</h2>
            {{ if gt (len $categoriesTerms) 0 }}
            <div class="taxonomy-list">
                {{ range $categoriesTerms }}
                <a class="tag" href="{{ .Page.RelPermalink }}">
                    {{ .Page.Title }}
                    <span class="tag-count">{{ .Count }}</span>
                </a>
                {{ end }}
            </div>
            {{ else }}
            <p class="empty-tip">暂时还没有分类。</p>
            {{ end }}
        </section>
        {{ end }}
    </div>
</section>
{{ end }}
